name: Create envfile

on: [push, workflow_dispatch]


jobs:

  create-envfile:
 
    runs-on: ubuntu-18.04
 
    steps:
    - uses: actions/checkout@v2
    - name: Make envfile
      id: make
      uses: amalashkevich/create-envfile@master
      with:
        envkey_DB_HOST: 'NEW_HOST'
        envkey_DB_PASSWORD: ${{ secrets.SECRET_KEY }}
        envkey_SOME_API_KEY: "123456abcdef"
        envkey_SECRET_KEY: ${{ secrets.SECRET_KEY }}
        template_file: dir1/.env.template
        output_file_name: dir2/.env
    - name: Echo make
      run: echo "${{ steps.make.outputs.content }}"
    - name: Read package.json
      id: env
      uses: juliangruber/read-file-action@v1
      with:
        path: dir2/.env
    - name: Echo .env
      run: echo "${{ steps.env.outputs.content }}"
